# KubeVirt metrics

This document aims to help users that are not familiar with all metrics exposed by different KubeVirt components. 
All metrics documented here are auto-generated by the utility tool `tools/doc-generator` and reflect exactly what is being exposed.

## Kubevirt specific metrics

#### kubevirt_info
Version information. 

## VMI metrics
#### kubevirt_vmi_memory_available_bytes
Amount of `usable` memory as seen by the domain.


#### kubevirt_vmi_memory_resident_bytes
Resident set size of the process running the domain.


#### kubevirt_vmi_memory_swap_traffic_bytes_total
Amount of `swap` memory traffic.


#### kubevirt_vmi_memory_unused_bytes
Amount of `unused` memory as seen by the domain.


#### kubevirt_vmi_network_errors_total
Counter of network errors when transmitting and receiving data.


#### kubevirt_vmi_network_traffic_bytes_total
Amount of traffic that is being transmitted and received.


#### kubevirt_vmi_network_traffic_packets_total
Amount of packets that are being transmitted and received.


#### kubevirt_vmi_phase_count
Sum of VMIs per phase and node. `phase` can be one of the following: [Pending Scheduling Scheduled Running Succeeded Failed Unknown]


#### kubevirt_vmi_storage_iops_total
Counter of read and write operations per disk device.


#### kubevirt_vmi_storage_times_ms_total
Time spent on read and write operations per disk device.


#### kubevirt_vmi_storage_traffic_bytes_total
Amount of data read and written per disk device.


#### kubevirt_vmi_vcpu_seconds
Amount of time spent in each state by each vcpu. Where `id` is the vcpu identifier and `state` can be one of the following: [blocked offline running]


#### kubevirt_vmi_vcpu_wait_seconds
Amount of time spent by each vcpu while waiting on I/O



## Virt-Controller metrics
#### leading_virt_controller
Indication for an operating virt-controller.


#### ready_virt_controller
Indication for a virt-controller that is ready to take the lead.




# Developing new metrics

After developing new metrics or changing old ones, please run `make generate` to regenerate this document.
Metrics will be separated in different sections according to these rules:

* VMI metrics: metrics that contain `kubevirt_vmi_`
* Virt-Controller metrics: metrics that contain `_virt_controller`

If you feel that the new metric doesn't follow these rules, please change `doc-generator` with your needs.
